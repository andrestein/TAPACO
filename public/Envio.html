<!DOCTYPE html>
<html>
<head>
	<title> TOPACO S.A - Envio</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico"> -->

    <title>TOPACO S.A</title>

    <!-- Bootstrap core CSS -->
    <link href="./css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="./css/Style.css" rel="stylesheet">

    <script src="js/cookies.js" > </script>

    <script type="text/javascript">
      
    //ARRAY CON EL LISTADO DE PRODUCTOS QUE USO EL CLIENTE EN EL PDF  
    //var productos = new Array();


    function enviarFormulario(){
      var enviar = true;

      var asesor = document.getElementById('asesores').options.item(document.getElementById('asesores').options.selectedIndex).value
      var nombre= document.getElementById('nombre').value
      if(nombre == ""){
        enviar=false;
      }
      var telefono= document.getElementById('telefono').value
      if(telefono == ""){
        enviar=false;
      }
      var preguntas= document.getElementById('preguntas').value
      if(preguntas==""){
        preguntas = "Sin Dudas";
      }
      var listaProductos = productos;
      var f = new Date();
      var fecha = f.getDate() + "/" + (f.getMonth() +1) + "/" + f.getFullYear();

      var archivo = {}
      archivo.asesor = asesor;
      archivo.nombre = nombre;
      archivo.telefono = telefono;
      archivo.preguntas = preguntas;
      archivo.listaProductos = listaProductos;
      archivo.fecha = fecha;

      console.log(archivo);

      if(enviar){
      //ALADIR AL JSON
      }else {
        window.alert("verificar por favor, hay informacion incompleta")
      }
    }

    function cargarListadoRealizado(){
      return localStorage.getItem("listadoTopaco");
    }

    function cargarInfo(){
      var productos = cargarListadoRealizado();
      console.log(productos);
      cargarAsesores();
    }

    function cargarAsesores(){
           // Crear un objeto para hacer peticiones HTTP
        var request = new XMLHttpRequest();

        // Abrir una peticion HTTP POST a la url deseado y no asincronico
        request.open( "GET", "obtenerAsesores", false );
    
        // Ejecuta la peticion HTTP
        request.send();

        var resp = request.response;
        resp = JSON.parse(resp);
        if(resp.estado=="ok"){
          var ases = resp.data;

          lista = ases;
          llenarBox(ases);  
        }else {
          window.alert("no se pudo cargar los asesores");
        }
      
    }

    function llenarBox(lista){
      var asesor= "";
      var opt = "";
        for (var i= 0; i < lista.length; i++) {
          asesor = lista[i].nombre + " de " + lista[i].encargado;
          console.log(asesor);
          opt = opt + "<option value="+lista[i].encargado+">"+asesor+"</option>"
        }

        document.getElementById("asesores").innerHTML = opt;
    }
    </script>

<style type="text/css">
    textarea {
  width: 500px;
  height: 150px;
    }

  </style>
</head>
<body>
  <!-- Aqui empieza lo que llamabamos Header -->
    <div class="navbar-wrapper">
      <div class="container">

        <nav class="navbar navbar-inverse navbar-static-top">
          <div class="container">

          	<!-- Parte del Titulo - TOPACO S.A -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="#">TOPACO S.A</a>
            </div>

            <!-- los demas opciones principales menos el desplegable -->
            <div id="navbar" class="navbar-collapse collapse">
              <ul class="nav navbar-nav">
                <li><a href="index.html">Inicio</a></li>
                <li><a href="AboutUs.html">Acerca de Nosotros</a></li>
                <li><a href="ContacUs.html">Contactenos</a></li>
				<li><a href="brands.html">Marcas de Distribucion</a></li>


                <!-- Desplegable-->
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Navegar<span class="caret"></span></a>
                  <ul id="prueba" class="dropdown-menu">

                  	<!-- colocar las marcas que tenemos -->

                    <li><a href="inicio.html">Iniciar Sesion</a></li>
                    <li><a href="registro2.html">Registrarse</a></li>
                    <li role="separator" class="divider"></li>
                    <li class="dropdown-header">Nav header</li>
                    <li><a href="#">Preguntas Frecuentes</a></li>
                    <li><a href="#">Terminos y Condiciones</a></li>
                  </ul>
                </li>
              </ul>
            </div>
          </div>
        </nav>

      </div>
    </div>

    <hr class="featurette-divider">

      <!-- /END THE FEATURETTES -->
 <div style="margin-left: 30%; margin-right: 30%;">
  <p>Envianos esta informacion y espera respuesta del asesor respectivo</p>  
  <p id="nombreArchivo"> archivo: Cargado Correctamente </p>
 	<hr>
  <p>Informacion del cliente solicitante: </p>
 	<input type="text" id="nombre" placeholder="Nombre">
  <input type="number" id="telefono" placeholder="Tel Contacto">
  <div>
  <hr>
   <p> tienes preguntas?, envialas junto con tu listado</p>
   <textarea id="preguntas"></textarea>
   </div>

  <div>
    <p>selecciona el asesor que deseas que atienda tu peticion: </p>
    <select id="asesores">
    </select>
    <br>
    <br>
  </div>
   <div>

   <hr>

     
     <button onclick="enviarFormulario()"> Enviar</button>
   </div>
 </div>


 <hr class="featurette-divider">
      <!-- FOOTER -->
      <footer>
        <p class="pull-right"><a href="#">Incio de la Pagina</a></p>
        <p>&copy; 2016 Todo Para Construir y TOPACO S.A son marcas registradas. &middot; <a href="#">Privacidad</a> &middot; <a href="#">Terminos de Uso</a></p>
      </footer>
      <script> loadOptions(); </script>

      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <script> cargarInfo();</script>

</body>
</html>